version: 2

models:
  - name: DimClubs
    description: "Dimension table for clubs information"
    config:
      materialized: table
      unique_key: 'DimClubId'
    columns:
      - name: DimClubId
        description: "Auto-incremental primary key for clubs dimension"
      - name: ClubNumber
        description: "Business key - unique identifier for the club"
      - name: ClubName
        description: "Name of the club"
      - name: Country
        description: "Country where the club is located"
      - name: Zone
        description: "Geographic zone of the club"
      - name: Status
        description: "Status of the club (Active/Inactive)"
      - name: CreateDate
        description: "Record creation timestamp"
      - name: UpdateDate
        description: "Record last update timestamp"
    tests:
      # Primary Key Tests
      - not_null:
          column_name: DimClubId
      - unique:
          column_name: DimClubId
      # Business Key Tests
      - not_null:
          column_name: ClubNumber
      - unique:
          column_name: ClubNumber
      # Required Field Tests
      - not_null:
          column_name: ClubName
      - not_null:
          column_name: Country
      - not_null:
          column_name: Status
      - not_null:
          column_name: CreateDate
      - not_null:
          column_name: UpdateDate
      # Data Quality Tests
      - accepted_values:
          column_name: Status
          values: ['A', 'I']
      # Unique Constraint Tests
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - ClubNumber
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - DimClubId

  - name: DimDates
    description: "Dimension table for dates with calendar attributes"
    config:
      materialized: table
      unique_key: 'DimDateId'
    columns:
      - name: DimDateId
        description: "Auto-incremental primary key for dates dimension"
      - name: Date
        description: "The date value - business key"
      - name: Year
        description: "Year component of the date"
      - name: Month
        description: "Month component of the date (1-12)"
      - name: Day
        description: "Day component of the date (1-31)"
      - name: Quarter
        description: "Quarter of the year (1-4)"
      - name: Week
        description: "Week number of the year"
      - name: DayOfWeek
        description: "Day of the week (1=Monday, 7=Sunday)"
      - name: IsWeekend
        description: "Boolean indicating if the date is a weekend"
      - name: IsHoliday
        description: "Boolean indicating if the date is a holiday"
      - name: CreateDate
        description: "Record creation timestamp"
      - name: UpdateDate
        description: "Record last update timestamp"
    tests:
      # Primary Key Tests
      - not_null:
          column_name: DimDateId
      - unique:
          column_name: DimDateId
      # Business Key Tests
      - not_null:
          column_name: Date
      - unique:
          column_name: Date
      # Required Field Tests
      - not_null:
          column_name: Year
      - not_null:
          column_name: Month
      - not_null:
          column_name: Day
      - not_null:
          column_name: Quarter
      - not_null:
          column_name: Week
      - not_null:
          column_name: DayOfWeek
      - not_null:
          column_name: IsWeekend
      - not_null:
          column_name: IsHoliday
      - not_null:
          column_name: CreateDate
      - not_null:
          column_name: UpdateDate
      # Unique Constraint Tests
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - Date
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - DimDateId
